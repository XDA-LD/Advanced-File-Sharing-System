{% extends "base.html" %}
{% block content %}
<!-- User info section -->
<div class="user-info">
    <div>Logged in as <strong>{{ username }}</strong></div>
    <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm">Logout</a>
</div>

<!-- Upload zone -->
<div class="upload-zone">
    <h4 class="mb-3">Upload Files</h4>
    <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data">
        <div class="mb-3">
            <input class="form-control" type="file" id="formFile" name="file">
        </div>
        <button type="submit" class="btn btn-primary">Upload</button>
    </form>
</div>

<!-- Files section -->
<div class="file-container">
    <div style="display: flex;">
        <h4 class="mb-3">Your Files</h4>
        <a href="/" style="margin-left: auto; max-height: 4vh; margin-right: 2vw;" class="btn btn-primary btn-sm">Refresh</a>
    </div>

    {% if files %}
        <div class="list-group">
            {% for file in files %}
                <div class="file-item">
                    <span>{{ file }}</span>
                    <div>
                        <a href="{{ url_for('download_file', filename=file) }}" class="btn btn-success btn-sm">Download</a>
                        <a href="{{ url_for('delete_file', filename=file) }}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this file?')">Delete</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-muted">No files uploaded yet.</p>
    {% endif %}
</div>
{% endblock %}